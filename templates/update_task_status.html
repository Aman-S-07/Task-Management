{% extends 'base.html' %}

{% block title %}update_task_status{% endblock title %}

{% block body %}
<form method="post">
    {% csrf_token %}
    <input type="text" name="name" value="{{ task.name }}" />
    <textarea name="description">{{ task.description }}</textarea>
    <select name="status">
        <option value="Not started">Not started</option>
        <option value="In Progress">In Progress</option>
        <option value="Completed">Completed</option>
    </select>
    <button type="submit">Save</button>
</form>

<script>
    function updateTaskStatus(taskId, newStatus) {
        if (confirm('Are you sure you want to change the status of this task?')) {
            $.ajax({
                type: 'POST',
                url: '/update_task_status/' + taskId + '/',
                data: {
                    'status': newStatus,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function(response) {
                    alert(response.message);
                    // Optionally update the UI here
                },
                error: function(xhr, status, error) {
                    alert('An error occurred while updating the task status.');
                }
            });
        }
    }
</script>

{% endblock body %}
